import streamlit as st
import logging
from modules._2_case_study_evaluation_1.tabs.tab1_guidelines import display_content as display_guidelines
from modules._2_case_study_evaluation_1.tabs.tab2_evaluation import display_content as display_evaluation
from modules._2_case_study_evaluation_1.tabs.tab3_user_summary import display_content as display_user_summary
from modules._2_case_study_evaluation_1.tabs.tab4_team_summary import display_content as display_team_summary

# Configure logging
logging.basicConfig(level=logging.INFO)
logger = logging.getLogger(__name__)

def display_content_page():

    # Title and description
    st.title("AI Case Study Evaluation (1)")
    st.markdown("""
    This evaluation tool will help gather a first round of feedbacks of the AI Case Studies generated by the application.
    """)

    # Initialize current tab in session state if not exists
    if 'current_tab' not in st.session_state:
        st.session_state.current_tab = "Guidelines"

    # Define tabs for different functionalities
    tab1, tab2, tab3, tab4 = st.tabs([
        "📊 Guidelines", 
        "📝 Evaluation", 
        "📈 User Summary",
        "📈 Team Summary"
    ])

    # Function to handle tab change
    def handle_tab_change(tab_name):
        if st.session_state.current_tab != tab_name:
            st.session_state.current_tab = tab_name
            logger.info(f"Tab changed to: {tab_name}")

    # = = = = = = = = = = = = = = = = = = = =
    # TAB 1: GUIDELINES
    # = = = = = = = = = = = = = = = = = = = =
    with tab1:
        handle_tab_change("Guidelines")
        display_guidelines()

    # = = = = = = = = = = = = = = = = = = = =
    # TAB 2: EVALUATION
    # = = = = = = = = = = = = = = = = = = = =
    with tab2:
        handle_tab_change("Evaluation")
        display_evaluation()

    # = = = = = = = = = = = = = = = = = = = =
    # TAB 3: USER SUMMARY
    # = = = = = = = = = = = = = = = = = = = =
    with tab3:
        handle_tab_change("User Summary")
        display_user_summary()
        
    # = = = = = = = = = = = = = = = = = = = =
    # TAB 4: TEAM SUMMARY
    # = = = = = = = = = = = = = = = = = = = =
    with tab4:
        handle_tab_change("Team Summary")
        display_team_summary()